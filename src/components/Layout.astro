---
import BaseHead from "./BaseHead.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import { cn } from "@sglara/cn";

interface Props {
  title?: string;
  description?: string;
}

const { title = SITE_TITLE, description = SITE_DESCRIPTION } = Astro.props;

const currentPath = Astro.url.pathname;

const linkClass = (path: string) =>
  cn("underline-offset-4", path === "/" ? currentPath === path && "underline" : currentPath.startsWith(path) && "underline");
---

<!doctype html>
<html lang="en"
  class="shadow-none sm:shadow-[inset_0_5px_0_0_var(--shadow-bar-color)]">
  <head>
    <BaseHead title={title} description={description} />
  </head>
  <body class="mx-auto max-w-[720px] px-6 sm:px-5 pt-5 sm:pt-10 pb-0 sm:pb-10 min-h-screen flex flex-col relative">
    <header class="flex flex-col gap-4">
      <div class="flex items-center justify-between">
        <a class="no-underline hover:no-underline" href="/">
          <h1 class="text-2xl mb-0 sm:mb-2 font-semibold">Waris Reshi</h1>
        </a>
        <nav class="flex gap-4 sm:hidden">
          <a href="/" class={linkClass("/")}>About</a>
          <a href="/blog/" class={linkClass("/blog/")}>Blog</a>
        </nav>
      </div>
      <div class="hidden sm:flex items-center justify-between">
        <nav class="flex gap-4">
          <a href="/" class={linkClass("/")}>About</a>
          <a href="/blog/" class={linkClass("/blog/")}>Blog</a>
        </nav>
        <nav>
          <a
            href="mailto:waris@asent.app"
            class="no-underline hover:underline underline-offset-4 flex items-center gap-1.5"
            title="Email">waris@asent.app</a
          >
        </nav>
      </div>
    </header>

    <main class="flex-1">
      <slot />
    </main>

    <footer
      class="pt-8 pb-4 flex items-center justify-between text-xs sm:text-sm"
      style="color: var(--color-muted);"
    >
      <span class="whitespace-nowrap">&copy; {new Date().getFullYear()} Waris Reshi</span>
        <div class="flex items-center gap-3 sm:gap-5">
          <a
            href="/rss.xml"
            target="_blank"
            class="no-underline hover:underline flex items-center gap-1.5"
            title="Subscribe via RSS"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-3 h-3 sm:w-4 sm:h-4"
              viewBox="0 0 24 24"
              fill="currentColor"
            >
              <path
                d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20C5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1Z"
              ></path>
            </svg>
            <span>RSS</span>
          </a>
          <a
            href="https://github.com/wrsrsh"
            target="_blank"
            class="no-underline hover:underline flex items-center gap-1.5"
            title="GitHub">Github</a
          >
          <a
            href="https://www.linkedin.com/in/wrsrsh/"
            target="_blank"
            class="no-underline hover:underline flex items-center gap-1.5"
            title="LinkedIn">LinkedIn</a
          >
        </div>
    </footer>
  </body>
</html>
