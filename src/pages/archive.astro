---
import Layout from "../components/Layout.astro"
import { getCollection } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";
import { SITE_TITLE } from "../consts";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout
  title={`Blog Archive - ${SITE_TITLE}`}
  description="Essays and thoughts on AI, technology, and life."
  pageType="blog-list"
>
  <section class="pt-14">
    <ul class="list-none p-0 m-0">
      {
        posts.map((post) => (
          <li class="flex mb-2 justify-between">
            <a href={`/post/${post.id}/`}>{post.data.title}</a>
            <span style="color: var(--color-muted);" class="whitespace-nowrap">
              <FormattedDate date={post.data.pubDate} />
            </span>
          </li>
        ))
      }
    </ul>

    {
      posts.length === 0 && (
        <p style="color: var(--color-muted);">No posts yet.</p>
      )
    }
  </section>
</Layout>
